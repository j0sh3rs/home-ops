---
apiVersion: traefik.io/v1alpha1
kind: Middleware
metadata:
  name: toolhive-system-compression
  namespace: toolhive-system
spec:
  compress:
    excludedContentTypes:
      - text/event-stream
---
apiVersion: traefik.io/v1alpha1
kind: Middleware
metadata:
  name: toolhive-system-security-headers
  namespace: toolhive-system
spec:
  headers:
    customResponseHeaders:
      X-Frame-Options: DENY
      X-Content-Type-Options: nosniff
      Referrer-Policy: same-origin
      X-XSS-Protection: "1; mode=block"
      Permissions-Policy: camera=(), microphone=(), geolocation=()
    contentSecurityPolicy: "default-src 'self' http: https: data: blob: 'unsafe-inline'"
    stsSeconds: 31536000
    stsIncludeSubdomains: true
    stsPreload: true
    forceSTSHeader: true
    browserXssFilter: true
    contentTypeNosniff: true
    frameDeny: true
